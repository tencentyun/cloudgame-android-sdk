# 会话事件

TcrSession#TcrEvent 事件枚举，通过 TcrSession#Observer#onEvent() 方法回调。
<table>
<tr>
<td rowspan="1" colSpan="1" style="text-align: center; vertical-align: middle;">事件代码</td>

<td rowspan="1" colSpan="1" style="text-align: center; vertical-align: middle;">事件含义</td>

<td rowspan="1" colSpan="1" style="text-align: center; vertical-align: middle;">事件详细描述</td>
</tr>

<tr>
<td rowspan="1" colSpan="3" style="text-align: center; vertical-align: middle;">会话生命周期事件</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >STATE_INITED</td>

<td rowspan="1" colSpan="1" >会话已初始化</td>

<td rowspan="1" colSpan="1" >详情参见[创建会话]()。<br>事件数据为String (client Session)。</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >STATE_CONNECTED</td>

<td rowspan="1" colSpan="1" >会话已连接</td>

<td rowspan="1" colSpan="1" >详情参见 [启动会话]()。<br>无事件数据。</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >STATE_RECONNECTING</td>

<td rowspan="1" colSpan="1" >会话正在重连</td>

<td rowspan="1" colSpan="1" >在网络中断时SDK会尝试进行会话重连，App 会收到此事件。<br>App 可以在 UI 上提示用户，例如“网络连接中...”。<br>无事件数据。</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >STATE_CLOSED</td>

<td rowspan="1" colSpan="1" >会话已关闭</td>

<td rowspan="1" colSpan="1" >在[创建会话]()失败、[启动会话]()失败、主动[释放会话]()、或者其他异常原因导致会话结束的时候，App 会收到此事件。<br>收到此事件后，会话已关闭，无法再使用。App 可以记录错误日志，上报运营分析等。<br>事件数据为Integer类型，具体值范围和含义参考TcrCode#SessionStopBaseCode。</td>
</tr>

<tr>
<td rowspan="1" colSpan="3" style="text-align: center; vertical-align: middle;">会话状态事件</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >CLIENT_STATS</td>

<td rowspan="1" colSpan="1" >性能数据</td>

<td rowspan="1" colSpan="1" >App 会定时收到此事件。<br>App 可以记录和分析性能数据。<br>事件数据为 StatsInfo 类型。</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >CLIENT_IDLE</td>

<td rowspan="1" colSpan="1" >客户端空闲</td>

<td rowspan="1" colSpan="1" >当用户长时间（TcrSessionConfig#idleThreshold 配置）未操作鼠标、键盘或屏幕时，App 会收到此事件。<br>App 可以根据自己的业务逻辑进行处理，如主动结束会话、忽略等。<br>无事件数据。</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >CLIENT_LOW_FPS</td>

<td rowspan="1" colSpan="1" >客户端低帧率</td>

<td rowspan="1" colSpan="1" >当客户端帧率连续10秒保持低水平时（TcrSessionConfig#lowFpsThreshold 配置），App 会收到此事件。<br>App 可以根据自己的业务逻辑进行处理，如提醒用户、忽略等。<br>无事件数据。</td>
</tr>

<tr>
<td rowspan="1" colSpan="3" style="text-align: center; vertical-align: middle;">云端状态事件</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >OPEN_URL</td>

<td rowspan="1" colSpan="1" >打开链接</td>

<td rowspan="1" colSpan="1" >当在云机上点击了可打开的 URL 链接时，App 会收到此事件。<br>App 可以处理 URL 点击事件，例如打开浏览器。<br>事件数据为String (the url)。</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >CAMERA_STATUS_CHANGED</td>

<td rowspan="1" colSpan="1" >摄像头状态改变</td>

<td rowspan="1" colSpan="1" >当云机上的摄像头状态发生改变时，App 会收到此事件。<br>App 可以处理摄像头状态事件，例如调整UI 等。<br>事件数据为 json 格式的 String 类型，包含分辨率宽度、高度和摄像头状态，示例数据：<br>{<br>   "status": "open_back/open_front/close",<br>   "height": 720,<br>   "width": 1280<br>}<br>其中status取值和含义：<br>"open_back": 打开后置摄像头<br>"open_front": 打开前置摄像头<br>"close": 关闭摄像头</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >IME_TYPE</td>

<td rowspan="1" colSpan="1" >输入法类型</td>

<td rowspan="1" colSpan="1" >在刚连接上云机时，或者云机[切换输入法]()时，App 会收到此事件。<br>App 可以切换本地的输入状态或 UI。<br>事件数据为 json 格式的 String 类型，包含云机当前的IME状态，示例数据：<br>{"ime_type":"cloud"/"local"}<br>其中<br>- "cloud": 云端输入法<br>- "local": 本地输入法</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >INPUT_STATUS_CHANGED</td>

<td rowspan="1" colSpan="1" >输入状态改变</td>

<td rowspan="1" colSpan="1" >当云机上的输入状态发生改变时，App 会收到此事件。<br>App 可以处理更新本地的输入状态，例如禁用用户输入控件。<br>事件数据为 json 格式的 String 类型，包含状态信息。示例数据：<br>{status:"disabled/enabled"}<br>- disabled: 禁止用户输入<br>- enabled: 允许用户输入</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >SCREEN_CONFIG_CHANGE</td>

<td rowspan="1" colSpan="1" >屏幕配置改变</td>

<td rowspan="1" colSpan="1" >当云机上的屏幕配置发生改变时，App 会收到此事件。<br>App 可以更新本地的页面屏幕配置方向，以和云端一致，例如切换 Activity 的横竖屏。<br>事件数据为 ScreenConfig 类型，包含屏幕方向、角度等信息。</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >VIDEO_STREAM_CONFIG_CHANGED</td>

<td rowspan="1" colSpan="1" >视频流配置改变</td>

<td rowspan="1" colSpan="1" >当云机串流的视频流配置发生改变时，App 会收到此事件。<br>App 可以按需更新解码器、渲染视图的参数。<br>事件数据为 VideoStreamConfig 类型，包含视频宽度、高度等信息。</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >INPUT_STATE_CHANGE</td>

<td rowspan="1" colSpan="1" >输入框状态改变</td>

<td rowspan="1" colSpan="1" >当云机上的输入框状态（如焦点）发生改变时，App 会收到此事件。<br>App 可以处理更新本地的输入框状态，例如同步文本内容。<br>事件数据为 json 格式的 String 类型，包含输入框类型、文本内容等信息。示例数据：<br>{<br>	"field_type": "normal_input\|autologin_input\|unfocused",<br>	"status": "disabled/enabled",<br>	"input_type": 32,<br>	"text": "xxx",<br>	"start_index": 0<br>}<br>其中，field_type<br>- normal_input: 点击普通窗口的输入框。<br>- autologin_input:【废弃】点击登录窗口的输入框（登录窗口由云端 RunningConfig 配置）, 可以配合 ack 的 auto_login 消息进行自动登录。<br>- unfocused: 从输入框移出光标。<br>status（只有端游支持，在自动登录过程中为了避免客户干扰，会忽略所有客户端发过来的控制消息）<br>- disabled: 禁止客户端输入<br>- enabled: 允许客户端输入<br>input_type：Android 输入框的类型。<br>text：输入框文字，只在 Android 平台支持。<br>start_index：表示当前光标在文本中的位置，只在 Android 平台支持。</td>
</tr>

<tr>
<td rowspan="1" colSpan="3" style="text-align: center; vertical-align: middle;">云手机事件</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >CAI_TRANS_MESSAGE</td>

<td rowspan="1" colSpan="1" >应用透传消息</td>

<td rowspan="1" colSpan="1" >当云端应用向客户端发送透传消息时，App 会收到此事件。<br>App 可以根据自己的业务逻辑进行处理。<br>事件数据为 JsonObject 类型，包含包名和消息内容。示例数据：<br>{<br>	"package_name": "com.example.myapplication",<br>	"msg": "test msg"<br>}</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >CAI_SYSTEM_USAGE</td>

<td rowspan="1" colSpan="1" >云手机负载信息</td>

<td rowspan="1" colSpan="1" >每10s云端应用向客户端发送的负载信息。<br>App 可以根据自己的业务逻辑进行处理。<br>事件数据为 JsonObject 类型，包含CPU、内存和GPU使用率等。示例数据：<br>{<br>	"cpu_usage": 30.1,<br>	"mem_usage": 7.2,<br>	"gpu_usage": 12.0<br>}</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >CAI_CLIPBOARD</td>

<td rowspan="1" colSpan="1" >剪贴板同步</td>

<td rowspan="1" colSpan="1" >当云手机剪贴板内容发生变化时，App 会收到此事件。<br>App 可以根据自己的业务逻辑进行处理。<br>事件数据为 JsonObject 类型，包含剪贴板文本内容。示例数据：<br>{"text": "abc"}</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >CAI_NOTIFICATION</td>

<td rowspan="1" colSpan="1" >收到通知消息</td>

<td rowspan="1" colSpan="1" >当云手机上有新通知时，App 会收到此事件。<br>App 可以根据自己的业务逻辑进行处理。<br>事件数据为 JsonObject 类型，包含应用包名、通知标题和正文。示例数据：<br>{<br>	"package_name": "com.tencent.qq",<br>	"title": "11",<br>	"text": "22"<br>}</td>
</tr>

<tr>
<td rowspan="1" colSpan="1" >CAI_SYSTEM_STATUS</td>

<td rowspan="1" colSpan="1" >系统状态更新</td>

<td rowspan="1" colSpan="1" >每1秒云端应用向客户端发送的系统状态。<br>App 可以根据自己的业务逻辑进行处理。<br>事件数据为 JsonObject 类型，包含导航栏可见性和媒体音量。示例数据：<br>{<br>	"nav_visible": false,<br>	"music_volume": 8<br>}</td>
</tr>
</table>
